@using ThaLeague.Models
@model ThaLeague.Models.Artist
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@{
    ViewData["Title"] = "Details";
    int counter = Model.Audios.Count;
    string insta = "https://www.instagram.com/" + Model.Instagram;
    string spotify = "https://www.spotify.com/" + Model.Spotify;
    string soundcloud = "https://www.soundcloud.com/" + Model.Soundcloud;
    string facebook = "https://wwww.facebook.com/" + Model.Facebook;
    string youtube = "https://wwww.youtube.com/" + Model.Youtube;
    string twitter = "https://wwww.twitter.com/" + Model.Twitter;
    string player = "https://open.spotify.com/embed/artist/" + Model.SpotifyUrl + "?utm_source=generator";
}
<style>
    .spotify-player {
        width: 100%;
    }

    .youtube-player {
        width: 100%;
        height: 75%;
    }
</style>
<div class="container curved" style="background-color:black;">
    <hr />
    <div class="row">
        <div class="col-4">
            <a asp-controller="Artist" asp-action="Index"><svg xmlns="http://www.w3.org/2000/svg" class="back-btn" width="50px" viewBox="0 0 512 512"><path fill="#FCFCFC" d="M256 0C114.6 0 0 114.6 0 256c0 141.4 114.6 256 256 256s256-114.6 256-256C512 114.6 397.4 0 256 0zM384 288H205.3l49.38 49.38c12.5 12.5 12.5 32.75 0 45.25s-32.75 12.5-45.25 0L105.4 278.6C97.4 270.7 96 260.9 96 256c0-4.883 1.391-14.66 9.398-22.65l103.1-103.1c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L205.3 224H384c17.69 0 32 14.33 32 32S401.7 288 384 288z" /></svg></a>
        </div>
        <div class="col-4 text-center">
            <h1>@Html.DisplayFor(model => model.StageName)</h1>
            @if (NotNull(Model.FirstName) || NotNull(Model.LastName))
            {
                <h2 class="text-light">
                    <b>
                        ( @Html.DisplayFor(model => model.FirstName)
                        @Html.DisplayFor(model => model.LastName) )
                    </b>
                </h2>
            }
        </div>
        <div class="col-4">
        </div>
    </div>
</div>
<hr />

<div class="row">
    <div class="col-xl-6 col-sm-12 col-md-12 bio-side img-side">
        <img class="img-fluid curved pic" src="~/images/@Html.DisplayFor(model => model.Image)" style="width: 600px; height: 585px; object-fit: cover;" /><br />
    </div>
    <div class="col-xl-6 col-sm-12 col-md-12 bio-side">
        <br />
        <br />
        <div class="container">
            <iframe style="border-radius:12px" class="spotify-player" src="@player" width="600" height="300" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
        </div>
        <div class="container bio-container bg-light text-center curved" style="width: 100%;">
            <h4 class="bio-text text-dark">
                @Html.DisplayFor(model => model.Bio)
            </h4>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xl-12 text-center">
        <ul class="container social-media-list socials text-center">
            @if (NotNull(Model.Instagram))
            {
                <li>
                    <a href="#" target="_blank" class="contact-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" id="insta" width="55px" viewBox="0 0 448 512">
                            <defs>
                                <linearGradient id="brand-gradient">
                                    <stop offset="0%" stop-color="#f8ed34" />
                                    <stop offset="50%" stop-color="#EA118D" />
                                    <stop offset="100%" stop-color="#2e368f" />
                                </linearGradient>
                            </defs>
                            <path fill="url(#brand-gradient)" d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z" />
                        </svg>
                    </a>
                </li>
            }
            @if (NotNull(Model.Facebook))
            {
                <li>
                    <a href="@facebook" target="_blank" class="contact-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="55px" viewBox="0 0 512 512"><path fill="#4267B2" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z" /></svg>
                    </a>
                </li>
            }
            @if (NotNull(Model.Twitter))
            {
                <li>
                    <a href="@twitter" target="_blank" class="contact-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="55px" viewBox="0 0 512 512"><path fill="#00acee" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" /></svg>
                    </a>
                </li>
            }
            @if (NotNull(Model.Youtube))
            {
                <li>
                    <a href="@youtube" target="_blank" class="contact-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="55px" viewBox="0 0 576 512"><path fill="#c4302b" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z" /></svg>
                    </a>
                </li>
            }
            @if (NotNull(Model.Soundcloud))
            {
                <li>
                    <a href="@soundcloud" target="_blank" class="contact-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="65px" viewBox="0 0 640 512"><path fill="#ff7700" d="M111.4 256.3l5.8 65-5.8 68.3c-.3 2.5-2.2 4.4-4.4 4.4s-4.2-1.9-4.2-4.4l-5.6-68.3 5.6-65c0-2.2 1.9-4.2 4.2-4.2 2.2 0 4.1 2 4.4 4.2zm21.4-45.6c-2.8 0-4.7 2.2-5 5l-5 105.6 5 68.3c.3 2.8 2.2 5 5 5 2.5 0 4.7-2.2 4.7-5l5.8-68.3-5.8-105.6c0-2.8-2.2-5-4.7-5zm25.5-24.1c-3.1 0-5.3 2.2-5.6 5.3l-4.4 130 4.4 67.8c.3 3.1 2.5 5.3 5.6 5.3 2.8 0 5.3-2.2 5.3-5.3l5.3-67.8-5.3-130c0-3.1-2.5-5.3-5.3-5.3zM7.2 283.2c-1.4 0-2.2 1.1-2.5 2.5L0 321.3l4.7 35c.3 1.4 1.1 2.5 2.5 2.5s2.2-1.1 2.5-2.5l5.6-35-5.6-35.6c-.3-1.4-1.1-2.5-2.5-2.5zm23.6-21.9c-1.4 0-2.5 1.1-2.5 2.5l-6.4 57.5 6.4 56.1c0 1.7 1.1 2.8 2.5 2.8s2.5-1.1 2.8-2.5l7.2-56.4-7.2-57.5c-.3-1.4-1.4-2.5-2.8-2.5zm25.3-11.4c-1.7 0-3.1 1.4-3.3 3.3L47 321.3l5.8 65.8c.3 1.7 1.7 3.1 3.3 3.1 1.7 0 3.1-1.4 3.1-3.1l6.9-65.8-6.9-68.1c0-1.9-1.4-3.3-3.1-3.3zm25.3-2.2c-1.9 0-3.6 1.4-3.6 3.6l-5.8 70 5.8 67.8c0 2.2 1.7 3.6 3.6 3.6s3.6-1.4 3.9-3.6l6.4-67.8-6.4-70c-.3-2.2-2-3.6-3.9-3.6zm241.4-110.9c-1.1-.8-2.8-1.4-4.2-1.4-2.2 0-4.2.8-5.6 1.9-1.9 1.7-3.1 4.2-3.3 6.7v.8l-3.3 176.7 1.7 32.5 1.7 31.7c.3 4.7 4.2 8.6 8.9 8.6s8.6-3.9 8.6-8.6l3.9-64.2-3.9-177.5c-.4-3-2-5.8-4.5-7.2zm-26.7 15.3c-1.4-.8-2.8-1.4-4.4-1.4s-3.1.6-4.4 1.4c-2.2 1.4-3.6 3.9-3.6 6.7l-.3 1.7-2.8 160.8s0 .3 3.1 65.6v.3c0 1.7.6 3.3 1.7 4.7 1.7 1.9 3.9 3.1 6.4 3.1 2.2 0 4.2-1.1 5.6-2.5 1.7-1.4 2.5-3.3 2.5-5.6l.3-6.7 3.1-58.6-3.3-162.8c-.3-2.8-1.7-5.3-3.9-6.7zm-111.4 22.5c-3.1 0-5.8 2.8-5.8 6.1l-4.4 140.6 4.4 67.2c.3 3.3 2.8 5.8 5.8 5.8 3.3 0 5.8-2.5 6.1-5.8l5-67.2-5-140.6c-.2-3.3-2.7-6.1-6.1-6.1zm376.7 62.8c-10.8 0-21.1 2.2-30.6 6.1-6.4-70.8-65.8-126.4-138.3-126.4-17.8 0-35 3.3-50.3 9.4-6.1 2.2-7.8 4.4-7.8 9.2v249.7c0 5 3.9 8.6 8.6 9.2h218.3c43.3 0 78.6-35 78.6-78.3.1-43.6-35.2-78.9-78.5-78.9zm-296.7-60.3c-4.2 0-7.5 3.3-7.8 7.8l-3.3 136.7 3.3 65.6c.3 4.2 3.6 7.5 7.8 7.5 4.2 0 7.5-3.3 7.5-7.5l3.9-65.6-3.9-136.7c-.3-4.5-3.3-7.8-7.5-7.8zm-53.6-7.8c-3.3 0-6.4 3.1-6.4 6.7l-3.9 145.3 3.9 66.9c.3 3.6 3.1 6.4 6.4 6.4 3.6 0 6.4-2.8 6.7-6.4l4.4-66.9-4.4-145.3c-.3-3.6-3.1-6.7-6.7-6.7zm26.7 3.4c-3.9 0-6.9 3.1-6.9 6.9L227 321.3l3.9 66.4c.3 3.9 3.1 6.9 6.9 6.9s6.9-3.1 6.9-6.9l4.2-66.4-4.2-141.7c0-3.9-3-6.9-6.9-6.9z" /></svg>
                    </a>
                </li>
            }
            @if (NotNull(Model.Spotify))
            {
                <li>
                    <a href="@spotify" target="_blank" class="contact-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="55px" viewBox="0 0 496 512"><path fill="#1DB954" d="M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z" /></svg>
                    </a>
                </li>
            }
        </ul>
        @if (SignInManager.IsSignedIn(User))
        {
            <div class="btn-group" role="group" aria-label="Basic outlined example">
                <a type="button" asp-controller="Artist" asp-action="Edit" class="btn btn-outline-primary" asp-route-id="@Model?.ArtistId">Edit</a>
                <button asp-controller="Artist" asp-action="Delete" data-bs-toggle="modal" data-bs-target="#deleteArtistModal" asp-route-id="@Model.ArtistId" class="btn btn-outline-danger">Delete</button>
            </div>
        }
    </div>
</div>
<hr />
<h1 class="text-center exclus">Exclusive Content</h1>
<hr />
<div class="container">
    <div class="row">
        <div class="col-4 col-sm-12 col-md-12 col-xl-4">
            @foreach (var item in Model.Audios)
            {
                <div class="card text-center curved" style="width: 21rem; background-color: black;">
                    <div class="d-flex bd-highlight mb-3">
                        <h5 class="text-center">@Html.DisplayFor(modelItem => item.Title)</h5>
                        <div class="dropdown ms-auto p-2 bd-highlight">
                            <svg xmlns="http://www.w3.org/2000/svg" type="button" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false" data-bs-toggle="dropdown" aria-expanded="false" width="20px" viewBox="0 0 448 512"><path fill="#FCFCFC" d="M120 256C120 286.9 94.93 312 64 312C33.07 312 8 286.9 8 256C8 225.1 33.07 200 64 200C94.93 200 120 225.1 120 256zM280 256C280 286.9 254.9 312 224 312C193.1 312 168 286.9 168 256C168 225.1 193.1 200 224 200C254.9 200 280 225.1 280 256zM328 256C328 225.1 353.1 200 384 200C414.9 200 440 225.1 440 256C440 286.9 414.9 312 384 312C353.1 312 328 286.9 328 256z" /></svg>
                            <ul class="dropdown-menu  dropdown-menu-dark text-center" aria-labelledby="dropdownMenuLink">
                                <li><a asp-action="Edit" asp-controller="Audio" asp-route-id="@item.AudioId">Edit</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a asp-controller="Audio" asp-action="Delete" data-bs-toggle="modal" data-bs-target="#deleteModal" asp-route-id="@item.AudioId">Delete</a></li>
                            </ul>
                        </div>
                    </div>
                    <img src="~/images/@item.Image" class="card-img-top" alt="...">
                    <div class="card-body">
                        <audio class="align-content-around" controls>
                            <source src="~/audios/@item.Path" type="audio/mp3">
                            Your browser does not support the audio element.
                        </audio>
                        <p class="card-text">@Model.StageName</p>
                    </div>
                </div>
                <form enctype="multipart/form-data" asp-controller="Audio" asp-action="DeleteConfirmed">
                    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog text-light">
                            <div class="modal-content bg-dark">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Delete Audio</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    Are you sure you want to delete this item?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                    <button class="btn btn-danger" asp-controller="Audio" asp-action="DeleteConfirmed" asp-route-id="@item.AudioId">Delete</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            }
        </div>
        <div class="col-md-8 col-sm-12 col-lg-8">
            @foreach (var item in Model.Videos)
            {
                <div class="container video">
                    <div class="dropdown ms-auto p-2 bd-highlight">
                        <svg xmlns="http://www.w3.org/2000/svg" type="button" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false" data-bs-toggle="dropdown" aria-expanded="false" width="20px" viewBox="0 0 448 512"><path fill="#FCFCFC" d="M120 256C120 286.9 94.93 312 64 312C33.07 312 8 286.9 8 256C8 225.1 33.07 200 64 200C94.93 200 120 225.1 120 256zM280 256C280 286.9 254.9 312 224 312C193.1 312 168 286.9 168 256C168 225.1 193.1 200 224 200C254.9 200 280 225.1 280 256zM328 256C328 225.1 353.1 200 384 200C414.9 200 440 225.1 440 256C440 286.9 414.9 312 384 312C353.1 312 328 286.9 328 256z" /></svg>
                        <ul class="dropdown-menu  dropdown-menu-dark text-center" aria-labelledby="dropdownMenuLink">
                            <li><a asp-action="Edit" asp-controller="Audio" asp-route-id="@item.VideoId">Edit</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a asp-controller="Video" asp-action="Delete" data-bs-toggle="modal" data-bs-target="#deleteVideoModal" asp-route-id="@item.VideoId">Delete</a></li>
                        </ul>
                    </div>
                    <iframe width="830" height="585" src="@item.Url" class="youtube-player" title="YouTube video player" frameborder="3" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <form enctype="multipart/form-data" asp-controller="Video" asp-action="DeleteConfirmed">
                    <div class="modal fade" id="deleteVideoModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog text-light">
                            <div class="modal-content bg-dark">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLabel">Delete Video</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    Are you sure you want to delete this video?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                    <button class="btn btn-danger" asp-controller="Video" asp-action="DeleteConfirmed" asp-route-id="@item.VideoId">Delete</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            }
        </div>
    </div>
</div>
<partial name="_Delete" model='new Artist { ArtistId = Model.ArtistId }' />
@if (SignInManager.IsSignedIn(User))
{
    <div class="container controls btn-group" role="group" aria-label="Basic outlined example">
        <partial name="_Create" model='new ThaLeague.ViewModels.AudioViewModel { ArtistId = Model.ArtistId, Artist = Model }' />
        <partial name="_CreateVideo" model='new ThaLeague.Models.Video { ArtistId = Model.ArtistId, Artist = Model }' />
    </div>
}

@{
    bool NotNull(string link)
    {
        if (link != null)
        {
            return true;
        }
        return false;
    };
}

